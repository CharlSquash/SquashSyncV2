{% extends "base.html" %}

{% block title %}{{ page_title|default:"Update Attendance" }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="page-header">
        <h1>{{ page_title }}</h1>
        <p>{{ session.session_date|date:"l, d M Y" }} at {{ session.session_start_time|time:"H:i" }}</p>
    </div>

    <form method="post">
        {% csrf_token %}
        <div class="attendance-grid">
            {% for item in player_list %}
            <label class="player-card {% if item.is_attending %}selected{% endif %}">
                {% if item.player.photo %}
                    <img src="{{ item.player.photo.url }}" alt="Photo of {{ item.player.full_name }}">
                {% endif %}
                <span class="player-name">{{ item.player.full_name }}</span>
                <input type="checkbox" class="visually-hidden" name="attendees" 
                       value="{{ item.player.id }}" 
                       id="player_{{ item.player.id }}"
                       {% if item.is_attending %}checked{% endif %}>
            </label>
            {% empty %}
                <p>No players found in the group '{{ school_group.name }}'.</p>
            {% endfor %}
        </div>

        <div class="mt-4">
            <button type="submit" class="btn btn-primary btn-lg">Save Attendance</button>
            <a href="{% url 'scheduling:session_detail' session.id %}" class="btn btn-secondary btn-lg">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}